<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <title>Lupa Sandi - Cinema's</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>üîê Lupa Sandi</h2>
            <p>Cinema's</p>
        </div>

        <div class="step-indicator">
            <div class="step-item active" id="stepDot1">1</div>
            <div class="step-item" id="stepDot2">2</div>
            <div class="step-item" id="stepDot3">3</div>
        </div>

        <div id="step1" class="step active">
            <form id="form-step1">
                <div class="form-group">
                    <label for="nama">Nama Lengkap</label>
                    <input type="text" id="nama" placeholder="Masukkan nama lengkap Anda" required>
                    <div class="helper-text">Gunakan nama yang terdaftar di sistem</div>
                </div>

                <div class="form-group">
                    <label for="noHp">Nomor WhatsApp</label>
                    <input type="tel" id="noHp" placeholder="62812345678xx" required>
                    <div class="helper-text">Format: 62 (tanpa +), contoh: 6281234567890</div>
                </div>

                <button type="submit">
                    <span id="btnText1">Minta Kode OTP</span>
                </button>

                <div class="back-link1">
                    <a onclick="redirectToLogin()">‚Üê Kembali</a>
                </div>

                <div id="error1" class="message error hidden"></div>
                <div id="success1" class="message success hidden"></div>
                <div id="info1" class="message info hidden"></div>
            </form>
        </div>

        <div id="step2" class="step">
            <form id="form-step2">
                <div class="timer-box">
                    <p>Kode OTP telah dikirim ke WhatsApp Anda</p>
                    <p>Waktu berlaku:</p>
                    <div class="time timer" id="timer">5:00</div>
                </div>

                <div class="form-group">
                    <label for="otp">Masukkan Kode OTP (6 digit)</label>
                    <input type="text" id="otp" placeholder="000000" maxlength="6" inputmode="numeric" required>
                    <div class="helper-text">Cek pesan WhatsApp Anda untuk kode OTP</div>
                </div>

                <button type="submit">
                    <span id="btnText2">Verifikasi OTP</span>
                </button>

                <div id="error2" class="message error hidden"></div>
                <div id="success2" class="message success hidden"></div>

                <div class="resend-section">
                    <p>Tidak menerima kode?</p>
                    <button type="button" class="resend-btn" id="resendBtn" onclick="resendOTP()">
                        Kirim Ulang OTP
                    </button>
                </div>

                <div class="back-link">
                    <a onclick="backToStep1()">‚Üê Kembali ke Step 1</a>
                </div>
            </form>
        </div>

        <div id="step3" class="step">
            <form id="form-step3">
                <div class="form-group mb-3">
                    <label for="newPassword">Sandi Baru</label>

                    <div class="password-wrapper">
                        <span class="password-icon" onclick="togglePassword('newPassword', this)">
                            <i class="bi bi-eye-slash"></i>
                        </span>

                        <input 
                            type="password"
                            id="newPassword"
                            class="password-input"
                            placeholder="Minimal 6 karakter"
                            required
                        >
                    </div>

                    <small class="text-muted">
                        Gunakan kombinasi huruf, angka, dan simbol untuk keamanan maksimal
                    </small>
                </div>

                <div class="form-group">
                    <label for="confirmPassword">Konfirmasi Sandi Baru</label>
                    <input type="password" id="confirmPassword" placeholder="Masukkan ulang sandi baru" required>
                </div>

                <button type="submit">
                    <span id="btnText3">Ubah Sandi</span>
                </button>

                <div id="error3" class="message error hidden"></div>
                <div id="success3" class="message success hidden"></div>

                <div class="back-link">
                    <a onclick="backToStep1()">‚Üê Mulai dari awal</a>
                </div>
            </form>
        </div>

        <div id="stepSuccess" class="step">
            <div class="success-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="#4caf50" stroke-width="2">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
            </div>
            <h3 style="color: #4caf50; text-align: center; margin-bottom: 10px;">‚úì Sandi Berhasil Diubah</h3>
            <p style="text-align: center; color: #666; margin-bottom: 20px;">
                Sandi Anda telah berhasil diperbarui. Silakan login dengan sandi baru Anda.
            </p>
            <button onclick="redirectToLogin()">Kembali ke Login</button>
        </div>
    </div>

    <script src="frontend-forgot-password.js"></script>
</body>
</html>